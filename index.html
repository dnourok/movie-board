<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>The Bucket List</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
  <h1> The Bucket List </h1>
  <div id="background-container">
    <div class="containerSearchMovie">
      <input id="movieSearch" type="text" />
      <button type="#button" class="btn btn-primary"><a id="button-text" href="#openModal">Search Movie</a></button>
    </div>
      
    <div id="openModal" class="modalDecoration">
      <div class="populateModal"> <a href="#close" title="Close" class="close">X</a>
        <h2 id="modalTitle">Add a Movie to Bucket List</h2>
          <div class="card">
          </div>
      </div>
    </div>

      <div class="container">
        <div class="row">
        </div>
      </div>

  </div>

</body>

	
</body>
  <script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
<script>
$(function() {
    var url = 'http://api.themoviedb.org/3/',
        mode = 'search/movie',
        input,
        movieName,
        key = '?api_key=c07bb825bc25d93f2608eb1883a674e4',
        urlPoster = 'http://api.themoviedb.org/3/configuration';
       

    $('button').click(function() {
        var input = $('#movieSearch').val(),
            movieName = encodeURI(input);
        $.ajax({
            url: url + mode + key + '&query='+movieName ,
            dataType: 'jsonp',
            success: function(data) {
             var information = data.results;
             var $card = $('.card');
             var $modal = $('.populateModal');
   						 $.each(information, function (i, item) {
                  var plot = item.overview;
                  var title = item.title;
                  var language = item.original_language;
                  var poster = item.poster_path;
                    
                    $('<div class="movieInfo">' + '<p class="title">' + title + '</p>' + '<p class="movieInfoText">' + "Plot:  " + plot + '</p>' + '<p class="languageText">' + "Original Language:  " + language + '</p>' + '<div class="plus-icon">' + '</figcaption><i class="glyphicon glyphicon-plus"> Add to Board </i>' + '</div>' + '</div>').prependTo($card).appendTo($modal);
    					});
    					
            }
        });
       
    });

  // clears movie cards once modal closes
    $('.close').click(function() {
      $('.movieInfo').empty();
    });

  // allows you to delete cards on your bucket list
    $('.row').on('click', '.glyphicon-trash', function(e) {
      e.preventDefault();
      var deleteCard = $(this).closest($("[class^=col-sm-4]"));
      $(deleteCard).remove();
    });

  // appends to the page the card you wish to add to your bucket list
    $('.populateModal').on('click','.plus-icon',function(e){
      e.preventDefault();
      var cardToAttach = $(this).closest($("[class^=movieInfo]"));
        $(cardToAttach).appendTo('.row').attr("class", "col-sm-4 updatedMovieInfo");

  // changes to delete icon once appended to page
      $('.glyphicon-plus').attr('class', 'glyphicon glyphicon-trash').text(" Delete");

  // closes modal once card has been picked 
      $('a.close')[0].click()

  }); 


});

</script>
</html>